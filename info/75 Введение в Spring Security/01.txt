75 Введение в Spring Security

Компонент Spring Framework

(spring_security.png)
Является стандартом для обеспечения безопасности
в Spring приложениях
Помогает реализовать функционал аутентификации и авторизации
Может использоваться как в монолитных, так имкросервисных
приложениях.

---

Authentication and Authorization
Аутентификация и Авторизация

(Authentication&Authorization.png)

Аутентификация - доказываем сервису, что это мы
(например с помощью логина и пароля)
(идентификация)

Авторизация - роли (права), которые нам разрешены после
аутентификации

---

Как Spring Security встраивается в приложение

С помощью фильтров
(filter.png)

Фильтр - объект, который перехватывает
все входящие запросы http

---

Как устроена аутентификация в Spring Security
(AuthenticationObject.png)

Подаем на вход Authentication Credentials
(некие учетные данные для проверки)

Получаем на выходе Authentication Principal
(в него как правило кладется сам объект после
аутентификации)

Подается на в AuthenticationProvider
(провайдеров может быть несколько)

Провайдер может обратиться за проверкой к
- БД
- Серверу
и т.д.

После успешной аутентификации мы можем положить
объект Authentication (с Principal внутри)
в сессию пользователю. Можно настроить фильтр
таким образом, чтобы при каждом запросе пользователя
этот объет подгружался из сессии
Пока сессия действительна - можем получать объект
и не заставлять проходить аутентификацию ещё раз

---

Сессии и Куки
(Session&Cookies.png)

Куки это просто пара ключ=значение, например id=156
которые находятся в памяти браузера.
Куки посылаются браузером при каждом запросе и если
сессия с id находится, это означает, что пользователь
аутентифицирован

Из сессии мы получаем данные об этом пользователе
(объект Authentication). Эти данные кладут в поток
будующего пользователя (ThreadLocal) и
доступны только в этом потоке.

---

Почему мы разлогиниваемся с сайтов.
У куки есть срок действия (например 2 недели)
После истечения сроков действия
сесиия не обнаруживает куки и разлогинивается
Тоже самое происходит при нажатии кнопки Log out.
















